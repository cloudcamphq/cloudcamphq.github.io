{
    "componentChunkName": "component---src-templates-docs-tsx",
    "path": "/docs/tutorial",
    "result": {"data":{"allApiDocs":{"nodes":[{"kind":"interface","name":"ARecordProps","docs":{"custom":null}},{"kind":"interface","name":"AaaaRecordProps","docs":{"custom":null}},{"kind":"interface","name":"AlarmConfiguration","docs":{"custom":null}},{"kind":"class","name":"App","docs":{"custom":{"order":"1","ignore":null}}},{"kind":"interface","name":"CNameRecordProps","docs":{"custom":null}},{"kind":"interface","name":"Configuration","docs":{"custom":null}},{"kind":"class","name":"Database","docs":{"custom":{"order":"5","ignore":null}}},{"kind":"interface","name":"DatabaseProps","docs":{"custom":null}},{"kind":"interface","name":"DatabaseVariables","docs":{"custom":null}},{"kind":"class","name":"Domain","docs":{"custom":{"order":"6","ignore":null}}},{"kind":"interface","name":"DomainProps","docs":{"custom":null}},{"kind":"enum","name":"LanguageCode","docs":{"custom":null}},{"kind":"interface","name":"MetricScalingProps","docs":{"custom":null}},{"kind":"interface","name":"MxRecordProps","docs":{"custom":null}},{"kind":"class","name":"PipelineStack","docs":{"custom":{"order":null,"ignore":"true"}}},{"kind":"interface","name":"PipelineStackProps","docs":{"custom":null}},{"kind":"class","name":"Ref","docs":{"custom":null}},{"kind":"interface","name":"RefParameterProps","docs":{"custom":null}},{"kind":"enum","name":"RepositoryHost","docs":{"custom":null}},{"kind":"interface","name":"ScalingSchedule","docs":{"custom":null}},{"kind":"interface","name":"ScheduleScalingProps","docs":{"custom":null}},{"kind":"interface","name":"SlackConfiguration","docs":{"custom":null}},{"kind":"class","name":"Stack","docs":{"custom":{"order":"2","ignore":null}}},{"kind":"class","name":"Stage","docs":{"custom":{"order":"3","ignore":null}}},{"kind":"interface","name":"TxtRecordProps","docs":{"custom":null}},{"kind":"class","name":"WebServer","docs":{"custom":{"order":"4","ignore":null}}},{"kind":"interface","name":"WebServerAlarmProps","docs":{"custom":null}},{"kind":"interface","name":"WebServerProps","docs":{"custom":null}}]},"allCommandDocs":{"nodes":[{"name":"deploy","order":"2"},{"name":"init","order":"1"},{"name":"status","order":"3"},{"name":"cert:create","order":"8"},{"name":"cert:delete","order":"9"},{"name":"domain:create","order":"4"},{"name":"domain:delete","order":"5"},{"name":"domain:list","order":"6"},{"name":"domain:show","order":"7"}]},"allMarkdownRemark":{"nodes":[{"frontmatter":{"slug":"installation","title":"Installation","order":1,"category":"getting-started"}},{"frontmatter":{"slug":"internals","title":"Internals","order":100,"category":"operations-guide"}},{"frontmatter":{"slug":"new-app","title":"Creating an app","order":1,"category":"operations-guide"}},{"frontmatter":{"slug":"tutorial","title":"Tutorial","order":2,"category":"getting-started"}}]},"markdownRemark":{"frontmatter":{"category":"getting-started","order":2,"slug":"tutorial","title":"Tutorial"},"headings":[{"value":"The source repository"},{"value":"Creating an app"},{"value":"Deploying to AWS"},{"value":"Infrastructure as Code"},{"value":"Adding a database"},{"value":"Setting up monitoring"},{"value":"Custom domain (Optional)"},{"value":"Cleaning up"}],"html":"<p>This tutorial will show you how to build and deploy an application with\nCloudCamp.</p>\n<p>Once you have learned the basics, you will be able to set up any cloud\napplication way faster than by hand or using configuration files. You will learn\nhow to automate all aspects of your app in surprisingly few lines of code -\nwhile still having the full flexibility of AWS at your fingertips.</p>\n<p>Make sure that <a href=\"/docs/installation/#installing-cloudcamp\">CloudCamp is\ninstalled</a> and your <a href=\"/docs/installation/#aws-setup\">AWS account is\nconfigured</a>.</p>\n<div class=\"p-5 bg-gray-50 text-sm px-10 border-l-4 border-blue-500 relative\">\n<div class=\"text-white bg-blue-500 w-5 h-5 text-center font-bold absolute\" style=\"left:-4px; top:0px;\">i</div>\nThe resources you create in this tutorial are covered by the AWS free\ntier. When you are done, you can tear down all resources with <a\nhref=\"#cleaning-up\">a single command</a>, leaving your AWS account in a\nclean state.\n</div>\n<h1>The source repository</h1>\n<p>To learn the basics of CloudCamp, we will deploy a simple web application. Fork\nthe <a href=\"https://github.com/cloudcamphq/tutorial\" target=\"_blank\">tutorial\nrepository on GitHub</a>, then clone it:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> clone git@github.com:YOUR-USERNAME/tutorial.git</code></pre></div>\n<p>Next, change directory and checkout the branch for your language:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\">\n  <pre class=\"ts language-ts\"><code class=\"ts language-ts\">$ cd tutorial\n$ git checkout typescript</code></pre>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n  <pre class=\"javascript language-javascript\"><code class=\"javascript language-javascript\">$ cd tutorial\n$ git checkout javascript</code></pre>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n  <pre class=\"python language-python\"><code class=\"python language-python\">$ cd tutorial\n$ git checkout python</code></pre>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"csharp\">\n  <pre class=\"csharp language-csharp\"><code class=\"csharp language-csharp\">$ cd tutorial\n$ git checkout csharp</code></pre>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"java\">\n  <pre class=\"java language-java\"><code class=\"java language-java\">$ cd tutorial\n$ git checkout java</code></pre>\n</div>\n<h1>Creating an app</h1>\n<p>CloudCamp organizes your deployments into \"apps\" - lightweight\ninfrastructure-as-code programs that live in your project alongside the rest of\nyour application code.</p>\n<p>Run <code class=\"language-text\">camp init</code> to create one:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ camp init</code></pre></div>\n<p>Set the language to <code class=\"language-text\"\ndata-language=\"ts\">TypeScript</code><code class=\"language-text\"\ndata-language=\"javascript\">JavaScript</code><code class=\"language-text\"\ndata-language=\"python\">Python</code><code class=\"language-text\"\ndata-language=\"java\">Java</code><code class=\"language-text\"\ndata-language=\"csharp\">C#</code> and select <code class=\"language-text\">Continue</code>.</p>\n<p>You now have a new directory called <code class=\"language-text\">cloudcamp</code> in the root of the project that\ncontains your new app at <code class=\"language-text\">cloudcamp/tutorial</code>.</p>\n<p>Let's change directory:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> cloudcamp/tutorial</code></pre></div>\n<h1>Deploying to AWS</h1>\n<p>Now can run deploy:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ camp deploy</code></pre></div>\n<p>Select <code class=\"language-text\">Continue</code> and follow the on screen instructions. This will connect your\nGitHub account and store the access token in your AWS account, so that pushing\nto your repository can update your application.</p>\n<p>When the deploy command has completed, the build process will start.</p>\n<p>Run <code class=\"language-text\">camp status</code> to watch the progress:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ camp status --wait --notify\n\nDeployment Status:   ✔ Deployed\nBuild Status:        ✔ Succeeded<span class=\"token punctuation\">..</span>.\nGit commit URL:      https://github.com/mme/tutorial/commit/b38a08f9e5c897d96d1c3bb2ec7d97c8e1afb05a\n\nOutputs:\n\nStack              ID            Type          Value\n────────────────── ───────────── ───────────── ──────────────────────────────────────────────────────────────────────\nTutorialProduction productionweb WebServer URL http://Cloud-tutor-1WOJ5XGFE5KAP-751011628.us-east-1.elb.amazonaws.com</code></pre></div>\n<p>Once finished, status will print the the URL of our web server. Copy and paste the\nURL in your browser to verify everything is working:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/31f2cde75c2b6e036b12ededbcf475ca/d52e5/tutorial-screen-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.02702702702703%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAABeElEQVQ4y6WSa44TMRCE57AciRPsSfjHH9gVLAKUIKFoM4/Mw/bY84pn4g+1UVYBkizalFSS3WpXd1c7Aei7nqp4otQ1xliMaTGtpbWWvh9QylA3mkaZPyixWmmqRuNcByGQzPNMnhZsNz9Iq4Km0Zi2pbUuJu29pyhrNtuCbVayzUuespI0ryhrza5S5LuGNCvw3pNM00TTNNIoy7wwjFMUOXLa7/F+fqbErHP0fY80IxRorRnH8begXAQhBF7Csiw45+i6Dhst6WPcGHNe8JSHQ+DwV+xS0YuCR5y+k3M4I3xa4GqHh5gUcGNg78939N+Cp3hzB2/fQZFu+HD/yMeHzzx8+sLXb6vrIyulYlA2JoY7a7HW8f57y+NPg9aKvNiR5QW7siTLc9rWxqXIV/lny0dB2aBsTTY4DAPLZPGji+dpHJFcodxjYedu/zbnvLzo4S14FpQxsyxjvV6zWq1eRXmbpmkcPxH1Y5e3ULoTJK/x7ZqfvwA+NokmVRWqMQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Browser screenshot\"\n        title=\"Browser screenshot\"\n        src=\"/static/31f2cde75c2b6e036b12ededbcf475ca/fcda8/tutorial-screen-1.png\"\n        srcset=\"/static/31f2cde75c2b6e036b12ededbcf475ca/12f09/tutorial-screen-1.png 148w,\n/static/31f2cde75c2b6e036b12ededbcf475ca/e4a3f/tutorial-screen-1.png 295w,\n/static/31f2cde75c2b6e036b12ededbcf475ca/fcda8/tutorial-screen-1.png 590w,\n/static/31f2cde75c2b6e036b12ededbcf475ca/d52e5/tutorial-screen-1.png 848w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>🎉 <strong>Congratulations!</strong> In a few minutes, you created:</p>\n<ul>\n<li>\n<p>a build pipeline that deploys your app on a single <code class=\"language-text\">git push</code>.</p>\n</li>\n<li>\n<p>a load balanced, containerized web server capable of scaling to a large number of machines.</p>\n</li>\n</ul>\n<p>Let's take a look at what we just created.</p>\n<h1>Infrastructure as Code</h1>\n<p>CloudCamp is based on <em>Amazon Cloud Development Kit (CDK), a declarative way of\nbuilding infrastructure</em>. This means that instead of imperatively creating and\nupdating resources, we define a model of what our infrastructure should look\nlike. CDK then takes care of making the necessary changes to accomplish our\ndesired state.</p>\n<p>Open up <code class=\"language-text\" data-language=\"ts\">src/camp.ts</code><code class=\"language-text\" data-language=\"javascript\">src/camp.js</code><code class=\"language-text\" data-language=\"python\">src/camp.py</code><code class=\"language-text\" data-language=\"java\">src/Camp.java</code><code class=\"language-text\" data-language=\"csharp\">src/Camp.cs</code> in your camp's directory and take a look.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"ts language-ts\"><code class=\"ts language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> App<span class=\"token punctuation\">,</span> WebServer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@cloudcamp/aws-runtime\"</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  dockerfile<span class=\"token operator\">:</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"javascript language-javascript\"><code class=\"javascript language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> App<span class=\"token punctuation\">,</span> WebServer <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@cloudcamp/aws-runtime\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  dockerfile<span class=\"token operator\">:</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"python language-python\"><code class=\"python language-python\"><span class=\"token keyword\">from</span> cloudcamp<span class=\"token punctuation\">.</span>aws_runtime <span class=\"token keyword\">import</span> App<span class=\"token punctuation\">,</span> WebServer\n&nbsp;\napp <span class=\"token operator\">=</span> App<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n&nbsp;\nWebServer<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span>\n    dockerfile<span class=\"token operator\">=</span><span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n    port<span class=\"token operator\">=</span><span class=\"token number\">3000</span>\n<span class=\"token punctuation\">)</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"csharp language-csharp\"><code class=\"csharp language-csharp\"><span class=\"token keyword\">using</span> <span class=\"token namespace\">Cloudcamp<span class=\"token punctuation\">.</span>Aws<span class=\"token punctuation\">.</span>Runtime</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token class-name\">App</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>Production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">WebServerProps</span> <span class=\"token punctuation\">{</span>\n    Dockerfile <span class=\"token operator\">=</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n    Port <span class=\"token operator\">=</span> <span class=\"token number\">3000</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"java language-java\"><code class=\"java language-java\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">cloudcamp<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">App</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">cloudcamp<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token class-name\">App</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token class-name\">WebServer<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">getProduction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">dockerfile</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">port</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In the beginning of every program, we instantiate the class <code class=\"language-text\">App</code> which stands\nfor an instance of our application running in the cloud.</p>\n<p>Next, we create a new <code class=\"language-text\">WebServer</code>, by passing in the parent stack\n<code class=\"language-text\">app.production</code> and an identifier <code class=\"language-text\">\"web\"</code>. Finally, we pass a Dockerfile and a\nport so our web server knows what to run.</p>\n<div class=\"p-5 bg-gray-50 text-sm px-10 border-l-4 border-blue-500 relative\">\n<div class=\"text-white bg-blue-500 w-5 h-5 text-center font-bold absolute\" style=\"left:-4px; top:0px;\">i</div>\n<code class=\"language-text\">App</code> organizes our resources into groups called <code class=\"language-text\">Stacks</code> that get built and\ndeployed together. Here we make use of a default stack called <code class=\"language-text\">app.production</code>.\n<br/><br/>\nBy providing a parent and an identifier when creating a resource, CDK can keep track of our infrastructure and knows when to create new resources or update existing ones.\n</div>\n<h1>Adding a database</h1>\n<p>To add a PostgreSQL database, make the following changes to this source code:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"ts language-ts\"><code class=\"ts language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> App<span class=\"token punctuation\">,</span> WebServer<span class=\"token punctuation\">,</span> Database <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@cloudcamp/aws-runtime\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ 1) add a postgres database to the production stack</span>\n<span class=\"token keyword\">let</span> productionDb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  engine<span class=\"token operator\">:</span> <span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  dockerfile<span class=\"token operator\">:</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ⬇ 2) add the database url to the environment variables of our webserver</span>\n  environment<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">DATABASE_URL</span><span class=\"token operator\">:</span> productionDb<span class=\"token punctuation\">.</span>databaseUrl <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"javascript language-javascript\"><code class=\"javascript language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> App<span class=\"token punctuation\">,</span> WebServer<span class=\"token punctuation\">,</span> Database <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@cloudcamp/aws-runtime\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ 1) add a postgres database to the production stack</span>\n<span class=\"token keyword\">let</span> productionDb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  engine<span class=\"token operator\">:</span> <span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  dockerfile<span class=\"token operator\">:</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ⬇ 2) add the database url to the environment variables of our webserver</span>\n  environment<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">DATABASE_URL</span><span class=\"token operator\">:</span> productionDb<span class=\"token punctuation\">.</span>databaseUrl <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"python language-python\"><code class=\"python language-python\"><span class=\"token keyword\">from</span> cloudcamp<span class=\"token punctuation\">.</span>aws_runtime <span class=\"token keyword\">import</span> App<span class=\"token punctuation\">,</span> WebServer<span class=\"token punctuation\">,</span> Database\napp <span class=\"token operator\">=</span> App<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n&nbsp;\n<span class=\"token comment\"># ⬇ 1) add a postgres database to the production stack</span>\nproduction_db <span class=\"token operator\">=</span> Database<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">,</span>\n    engine<span class=\"token operator\">=</span><span class=\"token string\">\"postgres\"</span>\n<span class=\"token punctuation\">)</span>\n&nbsp;\nWebServer<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span>\n    dockerfile<span class=\"token operator\">=</span><span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n    port<span class=\"token operator\">=</span><span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ⬇ 2) add the database url to the environment variables of our webserver</span>\n    environment<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"DATABASE_URL\"</span><span class=\"token punctuation\">:</span> production_db<span class=\"token punctuation\">.</span>database_url<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"csharp language-csharp\"><code class=\"csharp language-csharp\"><span class=\"token keyword\">using</span> <span class=\"token namespace\">Cloudcamp<span class=\"token punctuation\">.</span>Aws<span class=\"token punctuation\">.</span>Runtime</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">App</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ 1) add a postgres database to the production stack</span>\n<span class=\"token class-name\">Database</span> productionDb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Database</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>Production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">DatabaseProps</span> <span class=\"token punctuation\">{</span>\n    Engine <span class=\"token operator\">=</span> <span class=\"token string\">\"postgres\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>Production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">WebServerProps</span> <span class=\"token punctuation\">{</span>\n    Dockerfile <span class=\"token operator\">=</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n    Port <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ⬇ 2) add the database url to the environment variables of our webserver</span>\n    Environment <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Dictionary<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"DATABASE_URL\"</span><span class=\"token punctuation\">,</span> productionDb<span class=\"token punctuation\">.</span>DatabaseUrl <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"java language-java\"><code class=\"java language-java\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">cloudcamp<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">App</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">cloudcamp<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">cloudcamp<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Database</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">App</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ 1) add a postgres database to the production stack</span>\n<span class=\"token class-name\">Database</span> productionDb <span class=\"token operator\">=</span> <span class=\"token class-name\">Database<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">getProduction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">engine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token class-name\">WebServer<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">getProduction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">dockerfile</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">port</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// ⬇ 2) add the database url to the environment variables of our webserver</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">environment</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DATABASE_URL\"</span><span class=\"token punctuation\">,</span> productionDb<span class=\"token punctuation\">.</span><span class=\"token function\">getDatabaseUrl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Here we create a database and add it to the production stack.\nThen we let the web server know about the database by adding the environment\nvariable <code class=\"language-text\">DATABASE_URL</code>.</p>\n<p>Push the code to apply this change and wait for the pipeline to complete:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> -A <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> commit -m <span class=\"token string\">\"add database\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> push\n$ camp status --wait --notify</code></pre></div>\n<p>When refreshing our app in the browser we can see that it is now connected to\nthe database.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f885ab73c8c01cd260c05451c61a299f/5d72a/tutorial-screen-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.37837837837837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAABdklEQVQ4y61UW07DMBDMibkMp0DcgT/+KPRFJaha2kSEJH6RlMTOy4Ps4AJtChVlpJETx57dHa/jVVWFPM9RSImyLC2Vo1KQUqEo5B7zorB0703TwMCLghDzhyEWoY84JkgIBeMClHFIVSImDI8LHyv/BU9+aLlcP2MVvGAddHPzZQBKGbTW8AghqKoSUimk2QZvuYksLQul7LjJczvvvpl19UdGJOVIBIXgAnVdwxNC4BBMxF0Ye8yeNE3taCwyoJR+FzSbj2Hbttavr+OvgoBGqzWatj9QH3oFP0vdPh1tx0FBt+56rnF5A1SlRJx0p08oQ5JQ20q7ogdLbtuu5POrFmcXQBhTDEcTDO7GGI7vMbgdIYqJ3WP8c6J7glmWIYoiMMbAuUCeMRRpglchwCgF5wxZltp1nHMrYFrONfSPHtrouqPu6YCjDuVUbAVN+s6PU7gVDMMQ0+kUk8nkz5zNZlbQ3mWjKqU8ieav5G6Mh3+EyfAdWA/XPEm+agYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Browser screenshot\"\n        title=\"Browser screenshot\"\n        src=\"/static/f885ab73c8c01cd260c05451c61a299f/fcda8/tutorial-screen-2.png\"\n        srcset=\"/static/f885ab73c8c01cd260c05451c61a299f/12f09/tutorial-screen-2.png 148w,\n/static/f885ab73c8c01cd260c05451c61a299f/e4a3f/tutorial-screen-2.png 295w,\n/static/f885ab73c8c01cd260c05451c61a299f/fcda8/tutorial-screen-2.png 590w,\n/static/f885ab73c8c01cd260c05451c61a299f/5d72a/tutorial-screen-2.png 834w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h1>Setting up monitoring</h1>\n<p>In a production app, we need to know when things goes wrong - for example, when\nusers encounter a server error. To simulate an error, visit the <code class=\"language-text\">/error</code> path on\nyour webserver. Now wouldn't it be nice if we got a notification whenever there\nis an error? The <code class=\"language-text\">WebServer</code> class provides an API for exactly that.</p>\n<p>Here's how to update your code to add error notifications:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"ts language-ts\"><code class=\"ts language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> App<span class=\"token punctuation\">,</span> WebServer<span class=\"token punctuation\">,</span> Database <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@cloudcamp/aws-runtime\"</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> productionDb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  engine<span class=\"token operator\">:</span> <span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ assign our WebServer to a variable</span>\n<span class=\"token keyword\">let</span> productionWeb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  dockerfile<span class=\"token operator\">:</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n  environment<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">DATABASE_URL</span><span class=\"token operator\">:</span> productionDb<span class=\"token punctuation\">.</span>databaseUrl <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ set up email notifications when there is an application error</span>\nproductionWeb<span class=\"token punctuation\">.</span><span class=\"token function\">addAlarms</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  email<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"youremail@example.com\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"javascript language-javascript\"><code class=\"javascript language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> App<span class=\"token punctuation\">,</span> WebServer<span class=\"token punctuation\">,</span> Database <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@cloudcamp/aws-runtime\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> productionDb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  engine<span class=\"token operator\">:</span> <span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ assign our WebServer to a variable</span>\n<span class=\"token keyword\">let</span> productionWeb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  dockerfile<span class=\"token operator\">:</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n  environment<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">DATABASE_URL</span><span class=\"token operator\">:</span> productionDb<span class=\"token punctuation\">.</span>databaseUrl <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ set up email notifications when there is an application error</span>\nproductionWeb<span class=\"token punctuation\">.</span><span class=\"token function\">addAlarms</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  email<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"youremail@example.com\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"python language-python\"><code class=\"python language-python\"><span class=\"token keyword\">from</span> cloudcamp<span class=\"token punctuation\">.</span>aws_runtime <span class=\"token keyword\">import</span> App<span class=\"token punctuation\">,</span> WebServer<span class=\"token punctuation\">,</span> Database\n&nbsp;\napp <span class=\"token operator\">=</span> App<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n&nbsp;\nproduction_db <span class=\"token operator\">=</span> Database<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">,</span>\n    engine<span class=\"token operator\">=</span><span class=\"token string\">\"postgres\"</span>\n<span class=\"token punctuation\">)</span>\n&nbsp;\n<span class=\"token comment\"># ⬇ assign our WebServer to a variable</span>\nproduction_web <span class=\"token operator\">=</span> WebServer<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span>\n    dockerfile<span class=\"token operator\">=</span><span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n    port<span class=\"token operator\">=</span><span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n    environment<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"DATABASE_URL\"</span><span class=\"token punctuation\">:</span> production_db<span class=\"token punctuation\">.</span>database_url<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\n&nbsp;\n<span class=\"token comment\"># ⬇ set up email notifications when there is an application error</span>\nproduction_web<span class=\"token punctuation\">.</span>add_alarms<span class=\"token punctuation\">(</span>\n    email<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"youremail@example.com\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"csharp language-csharp\"><code class=\"csharp language-csharp\"><span class=\"token keyword\">using</span> <span class=\"token namespace\">Cloudcamp<span class=\"token punctuation\">.</span>Aws<span class=\"token punctuation\">.</span>Runtime</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token class-name\">App</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token class-name\">Database</span> productionDb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Database</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>Production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">DatabaseProps</span> <span class=\"token punctuation\">{</span>\n    Engine <span class=\"token operator\">=</span> <span class=\"token string\">\"postgres\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ assign our WebServer to a variable</span>\n<span class=\"token class-name\">WebServer</span> productionWeb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>Production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">WebServerProps</span> <span class=\"token punctuation\">{</span>\n    Dockerfile <span class=\"token operator\">=</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n    Port <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n    Environment <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Dictionary<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"DATABASE_URL\"</span><span class=\"token punctuation\">,</span> productionDb<span class=\"token punctuation\">.</span>DatabaseUrl <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ set up email notifications when there is an application error</span>\nproductionWeb<span class=\"token punctuation\">.</span><span class=\"token function\">AddAlarms</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">WebServerAlarmProps</span> <span class=\"token punctuation\">{</span>\n    Email <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"youremail@example.com\"</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"java language-java\"><code class=\"java language-java\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">cloudcamp<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">App</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">cloudcamp<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">cloudcamp<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Database</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token class-name\">App</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token class-name\">Database</span> productionDb <span class=\"token operator\">=</span> <span class=\"token class-name\">Database<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">getProduction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">engine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ assign our WebServer to a variable</span>\n<span class=\"token class-name\">WebServer</span> productionWeb <span class=\"token operator\">=</span> <span class=\"token class-name\">WebServer<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">getProduction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">dockerfile</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">port</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">environment</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DATABASE_URL\"</span><span class=\"token punctuation\">,</span> productionDb<span class=\"token punctuation\">.</span><span class=\"token function\">getDatabaseUrl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token comment\">// ⬇ set up email notifications when there is an application error</span>\nproductionWeb<span class=\"token punctuation\">.</span><span class=\"token function\">addAlarms</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">WebServerAlarmProps</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">email</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"youremail@example.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now update the app - you know the drill.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> -A <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> commit -m <span class=\"token string\">\"add monitoring\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> push\n$ camp status --wait --notify</code></pre></div>\n<p>Visit <code class=\"language-text\">/error</code> again, and you will get an email notification that something went\nwrong. Neat.</p>\n<h1>Custom domain (Optional)</h1>\n<p>Domains and certificates have to be added via the command line before being used. Use\n<code class=\"language-text\">domain:create</code> to set up a domain:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ camp domain:create yourdomain.com\n\n Nameservers\n ───────────────────────\n ns-1320.awsdns-37.org\n ns-999.awsdns-60.net\n ns-1838.awsdns-37.co.uk\n ns-72.awsdns-09.com\n\n › To request a certificate, run <span class=\"token variable\"><span class=\"token variable\">`</span>camp cert:create yourdomain.com<span class=\"token variable\">`</span></span>\n\nDomain created: yourdomain.com</code></pre></div>\n<p>Now change the settings of your domain to point to the nameservers in the\ncommand output.</p>\n<p>Once this is done, you can request a certificate.</p>\n<p>(Note that this might take a couple of minutes to complete):</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ camp cert:create yourdomain.com\n\nCreating new certificate<span class=\"token punctuation\">..</span>. <span class=\"token keyword\">done</span>\nWaiting <span class=\"token keyword\">for</span> certificate validation<span class=\"token punctuation\">..</span>. <span class=\"token keyword\">done</span>\nCertificate created: yourdomain.com</code></pre></div>\n<p>Finally, update the source code:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"ts language-ts\"><code class=\"ts language-ts\"><span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> App<span class=\"token punctuation\">,</span> WebServer<span class=\"token punctuation\">,</span> Database <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@cloudcamp/aws-runtime\"</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> productionDb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  engine<span class=\"token operator\">:</span> <span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token string\">\"show\"</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> productionWeb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ⬇ add your domain</span>\n  domains<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"yourdomain.com\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ⬇ enable https</span>\n  ssl<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ⬇ redirect http to https</span>\n  redirectHttp<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ...</span>\n  dockerfile<span class=\"token operator\">:</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n  environment<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">DATABASE_URL</span><span class=\"token operator\">:</span> productionDb<span class=\"token punctuation\">.</span>databaseUrl <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"javascript language-javascript\"><code class=\"javascript language-javascript\"><span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> App<span class=\"token punctuation\">,</span> WebServer<span class=\"token punctuation\">,</span> Database <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@cloudcamp/aws-runtime\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> productionDb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"db\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  engine<span class=\"token operator\">:</span> <span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token string\">\"show\"</span><span class=\"token punctuation\">;</span>\n&nbsp;\n<span class=\"token keyword\">let</span> productionWeb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ⬇ add your domain</span>\n  domains<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"yourdomain.com\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ⬇ enable https</span>\n  ssl<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ⬇ redirect http to https</span>\n  redirectHttp<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ...</span>\n  dockerfile<span class=\"token operator\">:</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n  environment<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">DATABASE_URL</span><span class=\"token operator\">:</span> productionDb<span class=\"token punctuation\">.</span>databaseUrl <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"python language-python\"><code class=\"python language-python\">production_web <span class=\"token operator\">=</span> WebServer<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ⬇ add your domain</span>\n    domains<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"yourdomain.com\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ⬇ enable https</span>\n    ssl<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ⬇ redirect http to https</span>\n    redirect_http<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ...</span>\n    dockerfile<span class=\"token operator\">=</span><span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n    port<span class=\"token operator\">=</span><span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n    environment<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"DATABASE_URL\"</span><span class=\"token punctuation\">:</span> production_db<span class=\"token punctuation\">.</span>database_url<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"csharp language-csharp\"><code class=\"csharp language-csharp\"><span class=\"token class-name\">WebServer</span> productionWeb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">WebServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>Production<span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">WebServerProps</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ⬇ add your domain</span>\n    Domains <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"yourdomain.com\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ⬇ enable https</span>\n    Ssl <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ⬇ redirect http to https</span>\n    RedirectHttp <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ...</span>\n    Dockerfile <span class=\"token operator\">=</span> <span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">,</span>\n    Port <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n    Environment <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Dictionary<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"DATABASE_URL\"</span><span class=\"token punctuation\">,</span> productionDb<span class=\"token punctuation\">.</span>DatabaseUrl <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"java language-java\"><code class=\"java language-java\"><span class=\"token class-name\">WebServer</span> productionWeb <span class=\"token operator\">=</span> <span class=\"token class-name\">WebServer<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">getProduction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"web\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// ⬇ add your domain</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">domains</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yourdomain.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// ⬇ enable https</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">ssl</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// ⬇ redirect http to https</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">redirectHttp</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// ...</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">dockerfile</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"../../Dockerfile\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">port</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">environment</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DATABASE_URL\"</span><span class=\"token punctuation\">,</span> productionDb<span class=\"token punctuation\">.</span><span class=\"token function\">getDatabaseUrl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And push your changes:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> -A <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> commit -m <span class=\"token string\">\"add custom domain\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> push\n$ camp status --wait --notify</code></pre></div>\n<p>Now, your app will be running under your custom domain.</p>\n<h1>Cleaning up</h1>\n<p>To delete all resources we created during this tutorial, run <code class=\"language-text\">destroy</code> in your camps directory:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ camp destroy</code></pre></div>\n<p>CloudCamp will list and upon confirmation destroy all the resources you created.</p>\n<p>If you added a custom domain, use this command to delete the DNS zone:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ camp domain:delete yourdomain.com</code></pre></div>"}},"pageContext":{"slug":"tutorial","onThisPage":[{"title":"The source repository","id":"the-source-repository","children":[]},{"title":"Creating an app","id":"creating-an-app","children":[]},{"title":"Deploying to AWS","id":"deploying-to-aws","children":[]},{"title":"Infrastructure as Code","id":"infrastructure-as-code","children":[]},{"title":"Adding a database","id":"adding-a-database","children":[]},{"title":"Setting up monitoring","id":"setting-up-monitoring","children":[]},{"title":"Custom domain (Optional)","id":"custom-domain-optional","children":[]},{"title":"Cleaning up","id":"cleaning-up","children":[]}],"links":{"prev":{"link":"/docs/installation","title":"Installation"}}}},
    "staticQueryHashes": []}